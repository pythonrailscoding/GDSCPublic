{% extends 'base.html' %}
{% load static %}

{% block title %} Create Blog {% endblock %}

{% block content %}
    <style>
        /* Modal */
.modal {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: #1c2333;
  padding: 2rem;
  border-radius: 10px;
  text-align: center;
  max-width: 400px;
  width: 90%;
}
.cancel-btn {
  background: #555;
  color: white;
  padding: 0.6rem 1.2rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}

.modal-actions {
  margin-top: 1.5rem;
  display: flex;
  justify-content: center;
  gap: 1rem;
}
    </style>
    <link rel="stylesheet" href="{% static 'css/create.css' %}">
    <link rel="stylesheet" href="{% static 'css/alert.css' %}">
    <div class="wrap">
    <form class="card" method="post" enctype="multipart/form-data">
      {% csrf_token %}
    {{ form.user }}
    {{ form.media }}
      <h1 class="title">Post Blog!</h1>
    {% if form.errors %}
  <div class="alert" id="alertBox">
    <span class="alert-message">
      Please correct the following errors:
      <ul>
        {% for field, errors in form.errors.items %}
          {% for error in errors %}
            <li><strong>{{ field|title }}:</strong> {{ error }}</li>
          {% endfor %}
        {% endfor %}
      </ul>
    </span>
    <button class="alert-close" onclick="dismissAlert()">√ó</button>
  </div>
{% endif %}


      <label class="field" for="{{ form.title.id_for_label }}">
        <span class="label">Title</span>
        {{ form.title }}
        <span class="hint">Keep it short and descriptive.</span>
        {% if form.title.errors %}<div class="error">{{ form.title.errors }}</div>{% endif %}
      </label>


      <label class="field">
        <span class="label">Description</span>
        {{ form.content }}
      </label>


      <label class="field">
        <span class="label">Thumbnail</span>
        <div class="filebox" id="dropzone">
          {{ form.thumbnail }}
          <div class="file-ui">
            <div class="icon">üñºÔ∏è</div>
            <div class="text">
              <strong>Click to choose</strong> or drag & drop
              <div class="sub">All files supported* up to 100 MB</div>
            </div>
          </div>
          <img src="" class="preview" id="preview" alt="">
        </div>
        {% if form.image.errors %}<div class="error">{{ form.image.errors }}</div>{% endif %}
      </label>
<p style="cursor: pointer; align-items: center" onclick="openDeleteModal()">*View unsupported file extensions</p>
      <button class="btn" type="submit">Post Blog!</button>
    </form>
  </div>
    <div id="deleteModal" class="modal">
  <div class="modal-content">
    <p>Unsupported extensions: '.tif', '.tiff', '.heif', '.heic', '.raw', '.psd', '.ai', '.eps', '.indd', '.pdf', '.xcf', '.jp2'</p>
    <div class="modal-actions">
        <button class="cancel-btn" onclick="closeDeleteModal()">Close</button>
    </div>
  </div>
</div>
    <script>
    const name = "{{ request.user.id }}";
	document.getElementById('userid').value = name;
    function openDeleteModal() {
  document.getElementById("deleteModal").style.display = "flex";
}

function closeDeleteModal() {
  document.getElementById("deleteModal").style.display = "none";
}
</script>
    </script>
    <script src="{% static 'js/create.js' %}"></script>
{% endblock %}
